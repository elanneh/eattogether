<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Let's Eat Together!</title>
	<script src="./js/jquery-2.1.4.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<link rel="stylesheet" href="./css/style.css" />
	<script type="text/javascript">

		$(document).ready(function(){
			var socket = io.connect();

			$.get('/guests', function(res){
			for(i=0; i<res.length; i++){

				if(res[i].type === "appetizer"){
					$("#appetizer").append("<div class='rsvp'>" + "<h2>" + res[i].name + "</h2>" + "<p>is bringing " + res[i].dish + " (" + res[i].type + ")</p></div>");
				}else if(res[i].type === "entree"){
					$("#entree").append("<div class='rsvp'>" + "<h2>" + res[i].name + "</h2>" + "<p>is bringing " + res[i].dish + " (" + res[i].type + ")</p></div>");
				} else if(res[i].type === "dessert"){

					$("#dessert").append("<div class='rsvp'>" + "<h2>" + res[i].name + "</h2>" + "<p>is bringing " + res[i].dish + " (" + res[i].type + ")</p></div>");
					}
				}
			});

			$("#rsvp_form").submit(function(){
				var input = $(".input").val();
					if(input === ""){
						alert("no freeloaders!!");
						return false;
						
				}
				else{
					$.post('/guests', function(response){
						location.reload();
						console.log(response);
				
					});
				}
			});
		
		});

	</script>
</head>
<body>	
	<div id="head">
		<h1>Let's Eat Together!</h1>
		<h2>Event Details</h2>
			<h3>Name of Event</h3>
			<p>Friendsgiving Potluck!</p>
			<h3>Date/Time</h3>
			<p>November 28, 2016</p>
			<p>7:00pm - 10:00pm</p>
			<h3>Location:</h3>
			<p>123 Spring Street</p>
			<p>Yourtown, CA 99999</p>
	
		<h2>What are you bringing?</h2>	

		<form id="rsvp_form" action="/guests" method="post">
			<p><input type="text" class="input" name="name" placeholder="Please enter your name"></p>
			<p><input type="text" class="input" name="dish" placeholder="What are you bringing?"></p>
			<p>Type of dish?</p>
			<p><select name="type">
				<option value="appetizer">Appetizer</option>
				<option value="entree">Entree</option>
				<option value="dessert">Dessert</option>
			</select></p>
			<input type="submit" value="Let's eat!">
		</form>	
	</div>
	<div id="appetizer">
	</div>
	<div id="entree">
	</div>
	<div id="dessert">
	</div>

</body>
</html>